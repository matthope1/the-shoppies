(this["webpackJsonpthe-shoppies"]=this["webpackJsonpthe-shoppies"]||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var i=n(4),a=n(2),s=n.n(a),o=n(19),r=n.n(o),c=(n(32),n(14)),h=n.n(c),u=n(20),d=n(10),l=n(21),m=n(22),b=n(6),p=n(26),j=n(25),v=n(24);n(34);var f=function(e){return Object(i.jsx)("div",{className:"MovieSearchForm",children:Object(i.jsx)("form",{onSubmit:e.handleSubmit,children:Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:e.label}),Object(i.jsx)("input",{id:e.id,type:"text",placeholder:e.placeholder,onChange:e.handleChange}),Object(i.jsx)("button",{type:"submit",children:Object(i.jsx)("i",{className:"fa fa-search"})})]})})})};var O=function(e){var t=e.title,n=e.year,a=e.posterUrl,s="";e.addNewNomination?s=Object(i.jsx)("button",{onClick:e.addNewNomination,disabled:e.disabled,children:"Nominate"}):e.removeNomination&&(s=Object(i.jsx)("button",{onClick:e.removeNomination,children:"remove"}));var o="movie poster for ".concat(t);return Object(i.jsxs)("div",{className:"Movie",children:[Object(i.jsx)("img",{className:"movie-poster",src:a,alt:o}),Object(i.jsxs)("p",{children:[t," (",n,")"]}),s]})};var N=function(e){return Object(i.jsx)("div",{className:"MovieQueryResults",children:e.dataList.map((function(t,n){var a=t.Title,s=!1;try{for(var o=0;o<e.nList.length;o++)e.nList[o].Title===a&&(s=!0)}catch(r){console.log("error: ",r)}return Object(i.jsx)(O,{disabled:s,title:t.Title,year:t.Year,posterUrl:t.Poster,addNewNomination:function(){return e.addNewNomination(t)}},n)}))})};var S=function(e){return Object(i.jsxs)("div",{className:"UserNominations",children:[e.dataList.map((function(t,n){return Object(i.jsx)("div",{children:Object(i.jsx)(O,{title:t.Title,year:t.Year,posterUrl:t.Poster,removeNomination:function(){return e.removeNomination(t)}},n)})})),Object(i.jsx)("p",{children:e.dataList.length>0?"":"Nothing to show at the moment..."})]})},g=n(15);n(35);g.a.initializeApp({apiKey:"AIzaSyDcmErYVL4B8Ez4pLIaX1JY5w_dh2I8XgQ",authDomain:"the-shoppies-a6032.firebaseapp.com",databaseURL:"https://the-shoppies-a6032-default-rtdb.firebaseio.com",projectId:"the-shoppies-a6032",storageBucket:"the-shoppies-a6032.appspot.com",messagingSenderId:"1026405451711",appId:"1:1026405451711:web:e34d7b5c6baf7168f4830a"});var x=g.a,y=(n(39),x.auth()),I=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={movieSearchInput:"",movieList:[],nominationList:[],user:null},e.handleInputSubmit=e.handleInputSubmit.bind(Object(b.a)(e)),e.handleInputChange=e.handleInputChange.bind(Object(b.a)(e)),e.movieSearchQuery=e.movieSearchQuery.bind(Object(b.a)(e)),e.writeUserData=e.writeUserData.bind(Object(b.a)(e)),e.anonSignIn=e.anonSignIn.bind(Object(b.a)(e)),e.addNewNomination=e.addNewNomination.bind(Object(b.a)(e)),e.removeNomination=e.removeNomination.bind(Object(b.a)(e)),e}return Object(m.a)(n,[{key:"movieSearchQuery",value:function(e){var t=this,n="https://www.omdbapi.com/?apikey=82a91ad2&s=".concat(e);fetch(n).then((function(e){return e.json()})).then((function(e){if("True"===e.Response){var n=Object(d.a)(e.Search);t.setState({movieList:n})}else console.log("no data yet")}))}},{key:"handleInputSubmit",value:function(e){this.movieSearchQuery(this.state.movieSearchInput),e.preventDefault()}},{key:"handleInputChange",value:function(e){var t=this;this.setState({movieSearchInput:e.target.value},(function(){t.movieSearchQuery(t.state.movieSearchInput)}))}},{key:"writeUserData",value:function(e,t){x.database().ref("users/"+e).set({uid:e,nominationList:t})}},{key:"addNewNomination",value:function(e){var t=Object(d.a)(this.state.nominationList);t.push(e),this.setState({nominationList:t}),this.writeUserData(this.state.user.uid,t)}},{key:"removeNomination",value:function(e){for(var t=this,n=Object(d.a)(this.state.nominationList),i=e.Title,a=-1,s=0;s<n.length;s++)n[s].Title===i&&(a=s);a>-1&&n.splice(a,1),this.setState({nominationList:n},(function(){t.writeUserData(t.state.user.uid,n)}))}},{key:"anonSignIn",value:function(){var e=Object(u.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.user||y.signInAnonymously().then((function(){return t.setState({user:y.currentUser})})).then((function(){x.database().ref("users/"+t.state.user.uid+"/nominationList").on("value",(function(e){var n=e.val();n&&t.setState({nominationList:n})}))})).catch((function(e){var t=e.code;console.log(t)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.anonSignIn()}},{key:"render",value:function(){var e="banner banner-"+(this.state.nominationList.length>=5?"show":"hide");return Object(i.jsx)(v.a,{basename:"/the-shoppies",children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("span",{className:e,children:" YOU HAVE 5 NOMINATIONS!"}),Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"The Shoppies"}),Object(i.jsx)(f,{label:"Movie Title",placeholder:"Search Movies",id:"movie-input",handleSubmit:this.handleInputSubmit,handleChange:this.handleInputChange}),Object(i.jsxs)("h3",{children:["Results for ",this.state.movieSearchInput]}),Object(i.jsx)(N,{dataList:this.state.movieList,searchTerm:this.state.movieSearchInput,addNewNomination:this.addNewNomination,nList:this.state.nominationList}),Object(i.jsx)("h3",{children:"Your Nomination(s)"}),Object(i.jsx)(S,{dataList:this.state.nominationList,removeNomination:this.removeNomination})]})]})})}}]),n}(a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),s(e),o(e)}))};r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(I,{})}),document.getElementById("root")),L()}},[[45,1,2]]]);
//# sourceMappingURL=main.089dea21.chunk.js.map