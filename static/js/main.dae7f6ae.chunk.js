(this["webpackJsonpthe-shoppies"]=this["webpackJsonpthe-shoppies"]||[]).push([[0],{34:function(e,t,n){},36:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n(8),s=n.n(i),o=n(23),r=n.n(o),c=(n(34),n(10)),h=n.n(c),u=n(24),l=n(12),d=n(25),m=n(26),b=n(5),p=n(28),j=n(27);n(36);var v=function(e){return Object(a.jsx)("div",{className:"MovieSearchForm",children:Object(a.jsx)("form",{onSubmit:e.handleSubmit,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:e.label}),Object(a.jsx)("input",{id:e.id,type:"text",placeholder:e.placeholder,onChange:e.handleChange}),Object(a.jsx)("button",{type:"submit",children:Object(a.jsx)("i",{className:"fa fa-search"})})]})})})};var f=function(e){var t=e.title,n=e.year,i=(e.posterUrl,"");return e.addNewNomination?i=Object(a.jsx)("button",{onClick:e.addNewNomination,disabled:e.disabled,children:"Nominate"}):e.removeNomination&&(i=Object(a.jsx)("button",{onClick:e.removeNomination,children:"remove"})),Object(a.jsxs)("div",{className:"Movie",children:[Object(a.jsxs)("p",{children:[t," (",n,")"]}),i]})};var O=function(e){return Object(a.jsxs)("div",{className:"MovieQueryResults",children:[Object(a.jsxs)("p",{children:['Results for "',e.searchTerm,'"']}),e.dataList.map((function(t,n){var i=t.Title,s=!1;try{for(var o=0;o<e.nList.length;o++)e.nList[o].Title===i&&(s=!0)}catch(r){console.log("error: ",r)}return Object(a.jsx)(f,{disabled:s,title:t.Title,year:t.Year,posterUrl:t.Poster,addNewNomination:function(){return e.addNewNomination(t)}},n)}))]})};var N=function(e){return Object(a.jsxs)("div",{className:"UserNominations",children:[Object(a.jsx)("p",{children:"Nominations"}),e.dataList.map((function(t,n){return Object(a.jsx)("div",{children:Object(a.jsx)(f,{title:t.Title,year:t.Year,posterUrl:t.Poster,removeNomination:function(){return e.removeNomination(t)}},n)})})),Object(a.jsx)("p",{children:e.dataList.length>0?"":"Nothing to show at the moment..."})]})},S=n(11);n(37);S.a.initializeApp({apiKey:"AIzaSyDcmErYVL4B8Ez4pLIaX1JY5w_dh2I8XgQ",authDomain:"the-shoppies-a6032.firebaseapp.com",databaseURL:"https://the-shoppies-a6032-default-rtdb.firebaseio.com",projectId:"the-shoppies-a6032",storageBucket:"the-shoppies-a6032.appspot.com",messagingSenderId:"1026405451711",appId:"1:1026405451711:web:e34d7b5c6baf7168f4830a"});var g=S.a,x=(n(40),n(42),g.auth());var y=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={movieSearchInput:"",movieList:[],nominationList:[],user:null},e.handleInputSubmit=e.handleInputSubmit.bind(Object(b.a)(e)),e.handleInputChange=e.handleInputChange.bind(Object(b.a)(e)),e.movieSearchQuery=e.movieSearchQuery.bind(Object(b.a)(e)),e.writeUserData=e.writeUserData.bind(Object(b.a)(e)),e.anonSignIn=e.anonSignIn.bind(Object(b.a)(e)),e.addNewNomination=e.addNewNomination.bind(Object(b.a)(e)),e.removeNomination=e.removeNomination.bind(Object(b.a)(e)),e}return Object(m.a)(n,[{key:"movieSearchQuery",value:function(e){var t="http://www.omdbapi.com/?apikey=82a91ad2&s=".concat(e);"https://jsonp.afeld.me/?callback=myCallback&url=".concat(t);fetch("https://jsonp.afeld.me/?callback=myCallback&url=http%3A%2F%2Fwww.omdbapi.com%2F%3Fapikey%3D82a91ad2%26s%3Dstar").then((function(e){console.log(e)}))}},{key:"handleInputSubmit",value:function(e){this.movieSearchQuery(this.state.movieSearchInput),e.preventDefault()}},{key:"handleInputChange",value:function(e){var t=this;this.setState({movieSearchInput:e.target.value},(function(){t.movieSearchQuery(t.state.movieSearchInput)}))}},{key:"writeUserData",value:function(e,t){g.database().ref("users/"+e).set({uid:e,nominationList:t})}},{key:"addNewNomination",value:function(e){var t=Object(l.a)(this.state.nominationList);t.push(e),this.setState({nominationList:t}),this.writeUserData(this.state.user.uid,t)}},{key:"removeNomination",value:function(e){for(var t=this,n=Object(l.a)(this.state.nominationList),a=e.Title,i=-1,s=0;s<n.length;s++)n[s].Title===a&&(i=s);i>-1&&n.splice(i,1),this.setState({nominationList:n},(function(){t.writeUserData(t.state.user.uid,n)}))}},{key:"anonSignIn",value:function(){var e=Object(u.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.user||x.signInAnonymously().then((function(){t.setState({user:x.currentUser},(function(){}))})).then((function(){g.database().ref("users/"+t.state.user.uid+"/nominationList").on("value",(function(e){var n=e.val();n&&t.setState({nominationList:n})}))})).catch((function(e){var t=e.code;e.message;console.log(t)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.anonSignIn()}},{key:"render",value:function(){var e="banner banner-hide";return this.state.nominationList.length>=5&&(e="banner banner-show"),Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsx)("h1",{children:"The Shoppies"}),Object(a.jsx)("h2",{className:e,children:" YOU HAVE 5 NOMINATIONS"}),Object(a.jsx)(v,{label:"Movie Title",placeholder:"Search Movies",id:"movie-input",handleSubmit:this.handleInputSubmit,handleChange:this.handleInputChange}),Object(a.jsxs)("div",{className:"flex-parent",children:[Object(a.jsx)(O,{dataList:this.state.movieList,searchTerm:this.state.movieSearchInput,addNewNomination:this.addNewNomination,nList:this.state.nominationList}),Object(a.jsx)(N,{dataList:this.state.nominationList,removeNomination:this.removeNomination})]})]})})}}]),n}(i.Component),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),w()}},[[60,1,2]]]);
//# sourceMappingURL=main.dae7f6ae.chunk.js.map